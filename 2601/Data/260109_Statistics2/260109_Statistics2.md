# Data_Statistics2
- 확률분포와 표본분포
- t-분포
- 가설 검정과 신뢰 구간

## 확률분포와 표본분포
- 확률분포(Probability Distribution)
    - 데이터가 **나타날 수 있는 모든 값**과 **그 값들의 나올 확률**을 정리한 것
        - 예: 사람의 키, 시험 점수, 동전 던지기 결과 등
    - 확률분포가 가지는 의의
        - 데이터가 어느 값 주변에 얼마나 모여 있는가?
        - 특정 값이 나타날 가능성은 어느 정도인가?
    - 크게 두 종류
        - 연속형 분포: 정규분포, 균등분포 등(값이 끊기지 않음)
        - 이산형 분포: 이항분포, 포아송분포 등(값이 끊김)
    - 확률분포를 이해하면 데이터의 패턴과 특징을 설명할 수 있고 예측 모델과 통계적 추론에서 **적합한 분석 방법을 선택**할 수 있음

- 표본분포
    - 모집단에서 표본을 여러 번 뽑아서, 각 순간마다 계산한 '평균,비율' 같은 통계량이 만드는 분포
    - 같은 모집단에서 동일한 크기 n의 표본을 많이 추출 했을 때, 어떤 통계량이 만들어내는 확률 분포
    - 표본이 얼마나 흔들리는 지(불확실성)를 설명
    - 특징
        - 단일 표본 하나만 봤을 때는 샘플 평균이 모집단의 평균에 가까울 수도 아닐 수도 있음
        - 많은 표본 평균을 모으면 **특정한 패턴**을 띠게 됨
    - 예시: 전국 고등학생의 평균 키
        - 전국 고등학생의 평균 키를 알고 싶다면, 모든 학생의 키를 조사해야 함 -> 시간, 비용 많이 소모
        - 랜덤하게 100명씩 뽑아서 평균을 구하는 것을 여러 번 반복하여 평균값들이 따르는 분포가 만들어지게 함

- 대표적인 분포의 종류
    - 분표: 데이터가 어떻게 생겼는지 보는 것
    - 이 분포들은 모집단 데이터에도 적용될 수 있고 표본 평균, 표본 비율 같은 표본통계량에도 적용될 수 있음
    - 정규 분포
        - 평균을 중심으로 대칭적인 종 모양 분포
        - 키, 몸무게, 시험 점수
    - 균등분포
        - 모든 값이 같은 확률을 가짐
        - 난수 생성, 시뮬레이션
    - 이항분포
        - 성공/실패 같은 이진 결과 모델링
        - 이메일 클릭률, 제품 불량률 예측
    - 포아송 분포
        - 일정한 시간/공간 내에서 사건 발생 횟수 모델링
        - 콜센터 문의 수
## 정규분포(Normal Distribution / Gaussian Distribution)
- 대칭적인 종 모양의 분포
- 많은 자연적/사회적 현상에서 발견되며, 데이터 분석에서 필수적인 개념
- 특징
    - 평균과 표준편차로 정확히 모양이 결정됨
        - 평균 = 중앙값 = 최빈값
    - 68-95-99.7 법칙
        - 데이터의 68%가 +-1 표준편차 내에 존재
        - 95% -> +-2
        - 99.7% -> +-3
    - 가운데 값이 가장 많고 양옆으로 갈수록 빈도가 적어짐
    - 현실에서 가장 흔히 나타나는 분포
    - 많은 자연 현상과 금융 데이터가 이 분포를 따르는 경우가 많음

- QQ-plot
    - 데이터의 **실제 분포가 정규분포와 얼마나 가까운지(정규성)** 그래프상으로 확인하는 대표적인 방법
    - 확인 방법
        - x축은 이론적인 정규분포, y축은 실제 데이터 분포를 의미
        - 점들이 직선 위에 가까이 있으면 정규 분포에 가까운 것
- 중심극한정리(Central Limit Theorem, CLT)
    - 모집단의 분포가 어떤 모양이든 상관없이, **충분히 큰 크기의 표본을 여러 번 추출해 계산한 표본평균의 분포는 정규분포에 가까워**진다는 원리(안되는 경우도 있긴 함)
    - 중심극한정리를 활용하면 불규칙한 데이터도 정규분포를 가정하여 예측이 가능해짐
    - 모집단의 분포 모양은 다양함
        - 치우친 분포
        - 한쪽 꼬리가 긴 분포
        - 이산값 분포
    - 중요성
        - 주식 수익률, 경제 지표 분석, 리스크 평가 등에서 **정규 분포를 가정하여 확률을 계산**할 수 있어 유용함

## 균등분포(Uniform Distribuion)
- 균등분포
    - 특정 범위 내에서 모든 값이 같은 확률을 가짐
    - 확률 밀도 함수
        - 연속형 균등 분포에서는 **구간 [a, b]에서 모든 값이 동일한 확률로 나타남**
    - 랜덤하게 숫자를 추천할 때, 모든 숫자가 같은 확률로 선택된다면 **균등 분포**
    - 예시: 로또 번호 추첨(이산형 균등분포)

## 이항분포(Binomial Distribution)
- 이항분포
    - 이항 분포 성공/실패 같은 이진(두 가지) 결과를 다루는 확률 모델
    - 확률 질량 함수
        - 총 시행 횟수, 성공 횟수, 성공 확률
    - 조건
        - 독립적인 실험 반복
        - 각 실험은 성공/실패(두 가지 결과) 중 하나만 가능
        - 각 실험의 성공 확률은 일정함
        - 실험을 여러 번 반복하면서 성공 횟수를 세는 것
    - 이항 분포는 여러 번의 독립적인 실험에서 성공하는 횟수의 분포를 나타냄
- 이항분포 주요 특성
    - 평균(기대값)
        - E(X) = n(횟수)*p(성공률) (기댓값=평균)
    - 분산 및 표준편차
        - 실험 횟수가 커질수록 분산도 커짐(불확실성 높아짐)
        - 성공 확률이 0.5일 때 가장 분산이 큼(확률 절반일 때)
    - 이항분포 그래프 모양
        - 성공 확률 0.5일 때 대칭적인 분포
        - 실험 횟수와 성공 확률에 따라 형태 달라짐

## 포아송 분포
- 포아송 분포
    - 일정한 시간 또는 공간에서 사건이 발생하는 횟수를 모델링하는 확률 분포
    - 확률 질량 함수
        - t= 단위 시간당 평균 발생 횟수
        - k= 실제 발생한 사건 수
        - E= 자연 상수
    - 조건
        - 사건 발생이 독립적이어야 함
        - 일정한 단위에서 사건이 발생할 확률이 일정함
    - **어떤 사건이 몇 번 발생할지**를 예측하는 데 사용
- 포아송 분포 주요 특성
    - 평균과 분산이 같음
        - 방문자 높아질 수록 평균 높아짐
    - 람다에 따른 그래프 모양 변화
        - 평균 사건 수 작으면 -> 그래프가 왼쪽에 치우침(비대칭)
        - 평균 사건 수 커지면 -> 그래프가 정규분포와 비슷
    - 이항분포와의 관계
        - 사건 발생할 확률이 매우 작고, 시행 횟수가 많다면
            - 이항분포 ~~ 포아송 분포
            - 예시: 1,000명 중 극소수만 특정 질병에 걸리는 경우 -> 포아송 분포로 근사 가능
    - 희귀한 사건(낮은 확률)의 발생 횟수를 모델링하는 데 적합

## t분포
- 표본 평균이 항상 정규분포를 따르는 것은 아님
    - 표본 수 적은 경우(불확실성 과소평가 될 가능성), 모분산을 모를 때(표본평균, 표본 분산 / 모평균, 모분산 있음(범위를 어디로 설정하냐에 따라 다름))

- 스튜던트의 t분포
    - 정규분포: 모집단의 분포가 정규일 때 사용 가능, 표본평균의 분포도 CLT(중심극한정리)로 인해 정규에 가까움
    - 현실에서 a(모집단의 표준편차(전체 범위))를 모름
    - 그래서 s(표본 표준편차(전체 중에 일부 범위))를 넣으면 -> 분포의 꼬리가 두꺼워짐 -> 이걸 반영한 분포가 t-분포
    - 고정된 a가 아니라 표본마다 변화하는 s라서 더 멀리 떨어진 값이 나올 가능성이 생김
    - t 분포는 정규분포와 유사하지만 꼬리 부분이 더 두꺼운 확률분포
        - 정규분포보다 극단값이 나타날 가능성을 더 현실적으로 반영
    - 자유도 개념(독립적으로 사용할 수 있는 데이터 갯수)
        - 자유도: 데이터를 가지고 얼마나 자유롭게 움직일 수 있는지를 나타내는 수
        - 자유도가 작을수록 꼬리가 두꺼워지고, 자유도가 커질수록 정규분포와 비슷
        - n이 3일때 자유롭게 사용할 수 있는 숫자는 2개
            - 평균 10일때 12, 10(두 숫자)를 정하면(이게 독립적으로 움직일 수 있는 숫자(n-1, 그러나 또 무조건 n-1은 아님)) 나머지 하나는 자동으로 8이 됨
    - 모양 형태

## 가설 검정과 신뢰 구간
- 데이터로 어떤 판단
- 결과 얼마나 신뢰할 수 있나
- 객관성 증거(데이터 기반)
- 통계적 실험이 중요(직관 기반x)
- 유의성 검정
    - **우리가 관측한 차이가 우연히 발생했을 확률**을 계산하는 과정
    - 예시: 신약 효과 좋다는 주장 -> 단순 평균 비교로는 차이가 크지 않아 보임
        - 이 차이가 우연이 아닐 확률 계산해야함
        - 유의성 검정을 수행해서 p-value가 0.05보다 작다면 -> 우연 아닐 확률 높음(신약 효과 있다고 판단)
- 가설 설정 개념
    - 가설: 특정한 주장을 검증하기 위한 가정
        - 통계적 검정의 핵심: 이 가설이 맞는지 아닌지 검증하는 과정
        - 관측한 데이터에서 **차이가 유의미한지를 검증**하는 과정에서 가설 설정해야함
    - 종류
        - 어느 하나를 기각할 경우 다른 가설을 채택함, 채택을 먼저 함으로써 증명하는 것이 아님(귀무가설을 기각시킴으로써 대립가설 채택)
        - 귀무가설
            - 차이가 없다 or 효과가 없다는 기본 가설
        - 대립가설
            - 차이가 있다 or 효과가 있다는 가설
- 신뢰 구간
    - 모집단의 참된 평균(모수)를 포함할 것으로 예상되는 값의 범위
    - 표본에서 얻은 평균을 기반으로, 모집단의 평균이 어느 범위 안에 있을지를 추정하는 방법
    - 예시(95% 신뢰구간)
        - 새로운 마케팅 전략이 고객 구매율을 평균 2~5% 증가시킬 것이다
        - 즉 95% 확신을 가지고 구매율 증가 범위 2~5% 사이라고 말할 수 있음
    - 신뢰 구간과 가설 검정 관계
        - 만약 신뢰구간이 0을 포함하지 않으면, 차이가 유의미하다고 판단
        - 신뢰구간이 [2%, 5%] -> 0% 포함x -> 유의미한 차이o
        - 신뢰구간이 [-1%, 3%] -> 0% 포함o -> 유의미한 차이x

- 유의수준(a)의 개념
    - 우리가 허용할 **우연한 결과**의 최대 확률을 의미
        - 과오
            - 제 1종 과오
                - 검정 결과 귀무가설 참 -> 기각(틀린 결론)
            - 제 2종 과오
                - 검정 결과 대립가설 참 -> 귀무가설 기각안함(틀린 결론)
        - 보통 0.05(5%) or 0.01(1%) 사용
        - 5%의 확률로 우연한 결과를 허용하겠다는 의미
    - 유의수준(a=0.05)의 해석
        - 검정 결과가 귀무가설이 맞더라도, 5% 확률로 틀린 결론을 내릴 수 있음
        - 1종 오류를 5% 이내로 제한하겠다는 의미
        - 유의수준을 낮출수록(a=0.01), 더 엄격한 검정을 수행하지만, 2종 오류위험 증가

- t-검정(t-test)
    - 두 집단의 평균 차이가 통계적으로 유의미한 지를 검정하는 방법
    - 특징
        - 모집단의 평균을 비교하는 검정 방법
        - 데이터가 정규성을 만족해야 함
        - 표본 수가 적더라도 **비교적 정확한 결과**를 제공
    - 가설 설정 예시
        - 귀무가설(H0): 두 집단의 평균이 같다(차이가 없다)
        - 대립가설(H1): 두 집단의 평균이 다르다(차이가 있다)

- t-통계량
    - 두 집단의 **평균 차이가 우연인지, 실제로 의미 있는 차이인지를 판단**하기 위한 지표
    - 특징
        - 이 t값을 이용해 **p-value**를 계산
        - t가 클 수록 **두 집단이 다를 가능성이 커짐**(p-value 가 낮아진다)
    - t-통계량 수식
        - t= (두 집단의 평균 차이)/(데이터의 퍼짐 정도)=(신호)/(잡음)으로 표현
        - 평균 차이가 크면 -> t 큼
        - 데이터 표준편차 크면 -> t 낮음
        - 표본 많을수록 -> t 큼

- p-value
    - 귀무가설이 참이라고 가정했을 때, 현재 관측된 결과보다 극단적인 결과가 나올 확률
        - 이 차이가 단순한 우연일 가능성이 얼마나 되는지 나타냄
        - p-value가 작을수록 우리가 관측한 차이가 우연일 가능성이 낮아짐
    - 해석 기준(유의 수준 a=0.05일 때)
        - p-value <= 0.05 -> 귀무가설 기각 -> 차이 유의미
        - p-value > 0.05 -> 귀무가설 유지 -> 차이 우연일 가능성 큼
        - p-value가 작으면 **우연x, 실제 차이 있는 것**이라는 결론

- 가설 검정
    - 개념
        - 데이터를 기반으로 특정 가설이 맞는지 판단하는 과정
        - 표본 데이터를 이용해 모집단의 특성을 추론하는 방법
    - 흐름
        - 데이터 수집 -> 데이터 전처리 -> 정규성 검정(모수적(분포가정)만 다룸, 비모수적(분포가정x)) -> 가설 검정 -> 결과 해석
    - 프로세스(순서)
        - 가설 설정
            - 귀무가설, 대립가설 설정
        - 유의수준 결정
            - 보통 a=0.05(5%) 사용
        - 검정 통계량 계산
            - t-검정, ANOVA 등 적절한 방법 선택
        - p-value 확인
            - p-value < 0.05이면 귀무가설 기각
        - 결론 도출
            - 가설 채택 여부 결정
    
- 유의성 검정의 유형
    - 단측 검정
        - 특정 방향으로 차이가 있는지를 검정
            - 한쪽에 0.5
            - A가 B보다 크다
        - H0: 차이 x , H1: 한쪽 방향으로 차이 o
    - 양측 검정
        - 방향 고려 없이 단순히 차이가 있는 지 검정
            - 양쪽에 0.25씩
            - A와 B는 차이가 있다
        - H0: 차이 x, H1: 차이 o

- 독립 표본 t-검정
    - 등분산 검정?도 고려돼야 함
    - t-검정 종류의 일종 **서로 독립적인 두 집단의 평균 비교**
    - 사용 목적
        - 서로 다른 집단의 평균 차이를 비교하고 싶을 때
        - 두 집단이 서로 독립적이며, 관측 값이 중복되지 않을 때
        - 데이터가 정규성을 만족할 때