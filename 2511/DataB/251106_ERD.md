# ERD

- Article & User
- on_delete : 게시글이 삭제되면 댓글도 삭제 되듯이 상호작용 느낌
    - 게시글 -> 댓글 O
    - 댓글 -> 게시글 X
- settings.AUTH_USER_MODEL -> models.py
- get_user_model() -> models.py 제외한 모든 위치
- 아래 문제는 models.py 에서만 적용
    - models.py에서는 get_user_model로 현재 활성화된 User 모델을 가져오지 못하는 경우가 있음
    - 구조상 articles가 먼저 실행됨
    - accounts가 아직 실행 안돼있어서 User 오브젝트가 아직 없음
    - 그래서 유저 모델을 넣어야 된다는 "임시 문자열"로 대체 함
    - AUTH_USER_MODEL -> 이 프로젝트에서 유저 모델을 정의한 문자열
- settings.AUTH_USER_MODEL 의 반환 값이 문자열이어도 괜찮은 이유
    - Django 에서 내부적으로 완전히 로딩된 후 모델 클래스 가져와 처리하는 **지연 평가** 방식으로 동작하기 때문

- User 필드 삭제
- 게시글 작성 시 작성자 정보가 함께 저장될 수 있도록 save의 commit옵션 활용
    - 현재 작성하는 유저 request.user 정보를 저장

- 게시글 DELETE
    - views.py 에서 또 사용자를 구분하여 처리하는 이유
        - 요청 보내는 방법이 브라우저 만 있는 것이 아니기 때문에 내부에서도 반드시 처리해야 됨

- view decorator
    - view 함수의 동작을 수정하거나 추가 기능을 제공하는 데 사용하는 python 데코레이터
    - view decorator는 뷰 함수 위에 붙여서 작동, 코드 흐름 방해하지 않고 깔끔하게 조건 설정 가능
    - 로그인 여부, 권한 검사, HTTP 요청 방식 제한 등을 다룸
    - 데코레이터는 여러개 가능, 위에 있는 데코레이터부터 순차적 실행
    - -> 보안성, 정확성, 명확성 높임
    - 종류
        - Allowed HTTP methods
            - 뷰가 허용하는 HTTP 요청 방식을 제한
            - 특정 HTTP method로만 View 함수에 접근할 수 있도록 제한하는 데코레이터
            - GET, POST 등 각 방식은 고유한 목적을 갖고 있다.
            - View 로직을 보호, 사용자에게 올바른 인터페이스 제공 가능
            - 종류
                - require_http_methods(["GET", "POST" 여러개])
                    - @require_http_methods(["GET", "POST" 여러개])
                    - list 요소는 HTTP method를 문자열(대문자)로 작성
                - require_safe()
                    - require_GET 이 있긴 하지만 safe로 권장
                        - 포괄적, 표준 HTTP 클라이언트와 호환성 높음
                    - GET and HEAD
                - require_POST()
                    - POST
                - -> 허용되지 않은 method로 요청시 405 오류 반환
        - Conditional view processing
            - 클라이언트가 보낸 조건을 확인한 후, 조건에 따른 응답 처리
        - GZip compression
            - 서버에서 응답 데이터를 압축해서 전송
- 오류
    - 400 번대 -> 클라이언트 원인
    - 500 번대 -> 서버 원인

- ERD
    - 데이터베이스의 구조를 시각적으로 표현하는 도구
    - 개체, 속성, 엔티티 간의 관계를 그래픽 형태로 나타내어 시스템의 논리적 구조를 모델링하는 다이어그램
    - 개발자와 디자이너가 데이터 흐름을 쉽게 이해, 안정적인 DB 구조 설계 가능

    - 종류
        - 엔티티(Entity)
            - 데이터베이스에 저장되는 객체나 개념
            - 테이블로 표현
        - 속성
            - 엔티티가 가지는 고유한 데이터 항목
            - 테이블의 컬럼으로 표현
        - 관계
            - 엔티티 간의 연관성 나타냄
            - 테이블 간의 연결된 선으로 표현됨 
    - Cardinality
        - 한 엔티티와 다른 엔티티 간의 수적 관계를 나타내는 표현
        - 일대일
        - 다대일
        - 다대다
        - 무료
            - Draw.io
                - 다양한 다이어그램 템플릿 제공
            - ERDCloud
                - 한페이지에서 여러개 가능 좋음(협업 기능)
    - 중요성
        - 데이터베이스 설계의 핵심 도구
            - 복잡한 비즈니스 로직을 단순하고 직관적인 다이어그램으로 정리
            - 관계를 명확히 정의함으로써 논리적 데이터 구조를 시각적으로 표현
            - 중복 데이터를 제거, 효율적인 저장 구조 제작 가능
        - 시각적 모델링으로 효과적인 의사소통 지원
            - 개발자, 기획자, 디자이너 등 다양한 직군이 ERD를 활용해 협업
            - 요구사항 분석 단계에서 누락된 기능이나 관계를 빠르게 파악 가능
            - 비전문가에게도 시스템 구조를 쉽게 설명 가능
        - 실제 시스템 개발 전 데이터 구조 최적화에 중요
            - 사전에 관계를 분석해 불필요한 관계나 비효율적인 설계를 방지
            - DB 구축 단계에서 중대한 구조적 오류를 줄임
            - 변경이나 유지보수 시에도 안정적으로 수정 가능